<h2 class="text-3xl font-bold mb-6 text-gray-800">Purchase Confirmation</h2>

<!-- Show user's address -->
<% if current_user.street.present? %>
  <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6">
    <p class="text-gray-700">
      <span class="font-semibold">Shipping to:</span>
      <%= current_user.street %>, <%= current_user.city %>, <%= current_user.state %> <%= current_user.zip %>
    </p>
  </div>
<% else %>
  <div class="bg-red-50 p-4 rounded-lg border border-red-200 mb-6">
    <p class="text-red-600 font-medium">No address on file.</p>
  </div>
<% end %>

<!-- Button to open modal -->
<div class="mb-8">
  <%= button_to "Enter Address",
                edit_address_user_path(current_user),
                method: :get,
                form: { data: { turbo_frame: "modal" } },
                class: "cursor-pointer bg-blue-600 text-white font-semibold px-5 py-2 rounded-lg shadow-sm hover:bg-blue-700 transition" %>
</div>

<!-- Modal frame -->
<turbo-frame id="modal"></turbo-frame>

<!-- Payment form -->
<div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
  <%= form_with url: checkout_path, method: :post, data: { turbo: false } do |form| %>
    <p class="text-lg font-semibold mb-2">Payment Details</p>
    <p class="text-sm text-gray-500 mb-4">No real payment will be processed.</p>

    <%= form.hidden_field :card_token, value: "tok_fake_#{SecureRandom.hex(4)}" %>

    <%= form.submit "Complete Purchase",
                    class: "bg-green-600 text-white font-semibold px-5 py-2 rounded-lg shadow-sm hover:bg-green-700 transition cursor-pointer" %>
  <% end %>
</div>



