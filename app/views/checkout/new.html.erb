<h2 class="text-2xl font-bold mb-4">Purchase Confirmation</h2>

<!-- Show user's address if present -->
<% if current_user.street.present? %>
  <p class="mb-4">
    <strong>Shipping to:</strong>
    <%= current_user.street %>, <%= current_user.city %>, <%= current_user.state %> <%= current_user.zip %>
  </p>
<% else %>
  <p class="mb-4 text-red-500">No address on file.</p>
<% end %>

<!-- Button to open modal -->
<%= button_to "Enter Address",
              edit_address_user_path(current_user),
              method: :get,
              form: { data: { turbo_frame: "modal" } },
              class: "bg-blue-500 px-4 py-2 rounded cursor-pointer hover:bg-blue-600 transition font-semibold tex-black" %>

<!-- Modal frame -->
<turbo-frame id="modal"></turbo-frame>

<!-- Payment form (fake checkout) -->
<%= form_with url: checkout_path, method: :post, data: { turbo: false } do |form| %>
  <p class="mt-6 mb-2 font-semibold">Payment Details</p>
  <p class="text-sm text-gray-500 mb-4">No real payment will be processed.</p>

  <%= form.hidden_field :card_token, value: "tok_fake_#{SecureRandom.hex(4)}" %>

  <%= form.submit "Complete Purchase",
                  class: "bg-green-500 text-black font-semibold px-4 py-2 rounded mt-4 cursor-pointer hover:bg-green-600 transition" %>
<% end %>



