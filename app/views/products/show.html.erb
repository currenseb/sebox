<% cache @product do %>
  <!-- Product Title & Back -->
  <div class="flex items-center justify-between mb-3">
    <h1 class="text-3xl font-bold text-gray-900"><%= @product.name %></h1>
    <%= link_to "← Back", products_path, class: "bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1.5 rounded-lg shadow-sm text-sm transition" %>
  </div>

  <!-- Description -->
  <div class="prose max-w-none mb-4 text-gray-700 leading-snug text-sm">
    <%= @product.description %>
  </div>
<% end %>

<!-- Product Image (smaller) -->
<% if @product.featured_image.attached? %>
  <div class="mb-4">
    <%= image_tag @product.featured_image, class: "rounded-lg shadow-md w-64 h-auto border border-gray-200" %>
  </div>
<% end %>

<!-- Inventory -->
<div class="mb-4">
  <%= render "inventory", product: @product %>
</div>

<!-- Price -->
<p class="text-lg font-semibold text-gray-800 mb-4">
  Price: <span class="text-green-600"><%= number_to_currency(@product.price) %></span>
</p>

<!-- Add to Cart -->
<div class="mb-6">
  <% if @product.inventory_count.to_i > 0 %>
    <%= button_to "Add to Cart", cart_items_path(product_id: @product.id), method: :post, class: "bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg shadow-sm transition" %>
  <% else %>
    <p class="text-red-500 font-semibold"></p>
  <% end %>
</div>




<!-- Admin Actions -->
<% if authenticated? && current_user&.email_address == "currensebastian@gmail.com" %>
  <div class="flex gap-3">
    <%= link_to "Edit", edit_product_path(@product), class: "bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg shadow-sm transition" %>
    <%= button_to "Delete", @product, method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg shadow-sm transition" %>
  </div>
<% end %>



